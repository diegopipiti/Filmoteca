{% extends "catalogo/base.html" %}

{% block title %}{{ movie.titolo }} â€“ Dettaglio{% endblock %}

{% block content %}
<div class="container-fluid px-3 px-lg-5 my-4 position-relative">

    {# FRECCIA SINISTRA #}
    {% if prev_movie %}
        <a href="{% url 'movie_detail' prev_movie.pk %}"
           class="reader-arrow reader-arrow-left">
            &#10094;
        </a>
    {% endif %}

    {# FRECCIA DESTRA #}
    {% if next_movie %}
        <a href="{% url 'movie_detail' next_movie.pk %}"
           class="reader-arrow reader-arrow-right">
            &#10095;
        </a>
    {% endif %}

    {# CONTENUTO DETTAGLIO #}
    <div class="row g-4 align-items-start">
        <div class="col-12 col-md-4 col-lg-3">
            {% if movie.locandina_url %}
                <img src="{{ movie.locandina_url }}"
                     class="img-fluid rounded shadow"
                     alt="{{ movie.titolo }}">
            {% else %}
                <div class="bg-secondary rounded d-flex align-items-center justify-content-center"
                     style="padding-top:150%;">
                    <span class="small text-center px-2">
                        Nessuna locandina disponibile
                    </span>
                </div>
            {% endif %}
        </div>

        <div class="col-12 col-md-8 col-lg-9">
            <h1 class="h3 fw-bold mb-2">{{ movie.titolo }}</h1>

            <p class="mb-2">
                {% if movie.anno %}
                    <span class="badge bg-light text-dark me-1">{{ movie.anno }}</span>
                {% endif %}
                {% if movie.genere %}
                    <span class="badge bg-secondary me-1">{{ movie.genere }}</span>
                {% endif %}
                {% if movie.voto %}
                    <span class="badge bg-warning text-dark">â˜… {{ movie.voto }}/10</span>
                {% endif %}
            </p>

            {% if movie.trama %}
                <p class="mt-3">{{ movie.trama }}</p>
            {% endif %}

            <p class="small mt-3 mb-1">
                <strong>Percorso file:</strong><br>
                {{ movie.percorso }}
            </p>
            <p class="small mb-1">
                <strong>Dimensione:</strong> {{ movie.dimensione_file_mb }} MB
            </p>
            <p class="small mb-3">
                <strong>Codifica:</strong> {{ movie.codifica }}
            </p>

            <!-- BOTTONI DELLA MODALITÂ° A TUTTO SCHERMO -->
            <div class="d-flex flex-wrap gap-3 mt-4">

                <!-- PLAY -->
                <a href="{% url 'movie_play' movie.pk %}"
                class="amb-btn amb-btn-play">
                    <span class="amb-btn-icon-play"></span>
                    <span>Riproduci</span>
                </a>

                <!-- MODIFICA -->
                <a href="{% url 'movie_edit' movie.pk %}"
                class="amb-btn amb-btn-info">
                    <span class="amb-btn-icon-info">âœŽ</span>
                    <span>Modifica</span>
                </a>
                
                <!-- AGGIORNA METADATI -->
                <a href="{% url 'update_movie_poster' movie.pk %}"
                class="amb-btn amb-btn-info">
                    <span class="amb-btn-icon-info">âŸ³</span>
                    <span>Aggiorna metadati</span>
                </a>
                
                <!-- ELIMINA -->
                <a href="{% url 'movie_delete' movie.pk %}"
                class="amb-btn amb-btn-info">
                    <span class="amb-btn-icon-info">ðŸ—‘</span>
                    <span>Elimina</span>
                </a>

                <!-- TORNA ALLA VETRINA -->
                <a href="{% url 'movie_list' %}"
                class="amb-btn amb-btn-info">
                    <span class="amb-btn-icon-info">âŸµ</span>
                    <span>Torna alla vetrina</span>
                </a>

            </div>


        </div>
    </div>
</div>
{% endblock %}
